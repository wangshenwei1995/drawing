# 拖动流程设计说明书

## 背景说明

### 业务背景

先河集团其中一家子公司，开拓新业务，环保养鱼。

### 功能需要

- 显示养鱼水池的实时水质数据、气象数据、设备数据等。

- 告警记录:仪器所以报警，按照指定条件报警，划分报警等级。

- 记录日志：系统更新日志、参数日志（记录设置运行中参数记录，比如流程中采样泵工作的时间，数据采集的时间，流通池置换的时间）、登陆日志、停电记录、

  工作状态记录（1.调试模式；2.正常运行模式；3.清洗模式；4.校准模式；5.待机）

- 运行次数限制（主要预防客户白嫖）

- 补测记录：对异常的水池数据判断为异常或报警时，**必须在执行完本次工作流程后**，开始对异常或报警养殖池启动单次工作流程，运行模式不变。

- 自定义工作流，用户自定义工作流

- 调试模式：手动设置参数执行每一步工作流.



## 产品业务说明

### 业务拆分

#### 客户端（web 端）

web 端 主要提供客户使用,功能主要是，权限管理，自定义建立流行，查看各个水池设备的运行状态，实时的对水池和气象的数据监控，对水池的流程校准。

### 系统架构设计说明（后端架构说明）

#### 服务情况

服务主要拆分如下：

- 业务平台: 向客户端提供服务,和少量个性化服务
- 流程服务: 建立自动化流程，执行流程
- 数据服务: 提供设备和业务平台直接的数据转发
- 设备微服务: 主要实时的采集设备的数据，和接受 数据平台转发下来的操作指令